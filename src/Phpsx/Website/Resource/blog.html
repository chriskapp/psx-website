<!DOCTYPE HTML>
<html>
<head>
	<?php include($location . '/inc/meta.html'); ?>
	<?php echo \PSX\Atom\Writer::link('PSX', $router->getUrl('Phpsx\Website\Application\Blog::doFeed')); ?>
</head>
<body>

<?php include($location . '/inc/header.html'); ?>

<h2 id="blog">Blog</h2>
<?php if(!empty($entry)): ?>
	<?php foreach($entry as $row): ?>
	<div class="psx-entry">
		<h3><a href="<?php echo $router->getUrl('Phpsx\Website\Application\Blog::doDetail', ['title' => $row->getTitleSlug()]); ?>"><?php echo $row->getTitle(); ?></a></h3>
		<p><small>posted by <a href="<?php echo $row->getAuthorUri(); ?>"><?php echo $row->getAuthorName(); ?></a> on <?php echo $row->getUpdated()->format('Y-m-d'); ?></small></p>
		<div class="psx-summary"><?php echo $row->getSummary(); ?></div>
		<div class="psx-categories">
			<span>category: </span>
			<ul>
				<?php foreach($row->getCategory() as $category): ?>
				<li><a href="<?php echo $router->getUrl('Phpsx\Website\Application\Blog::doCategory', ['category' => $category]); ?>"><?php echo $category; ?></a></li>
				<?php endforeach; ?>
			</ul>
		</div>
	</div>
	<hr />
	<?php endforeach; ?>

	<nav>
		<ul class="pager">
			<?php if($startIndex == 0): ?>
			<li class="previous disabled"><a href="#"><span aria-hidden="true">&larr;</span> Next</a></li>
			<?php else: ?>
			<li class="previous"><a href="<?php echo $links[2]['href']; ?>"><span aria-hidden="true">&larr;</span> Next</a></li>
			<?php endif; ?>
			<li class="next"><a href="<?php echo $links[1]['href']; ?>">Previous <span aria-hidden="true">&rarr;</span></a></li>
		</ul>
	</nav>
<?php else: ?>
	<div class="alert alert-danger">No blog entry available</div>
<?php endif; ?>

<?php include($location . '/inc/footer.html'); ?>

</body>
</html>

